#!/bin/bash
# This file is part of the https://gist.github.com/Maxximo88
# Copyright (c) 2017 Carofano Massimo Antonio
# 
# This program is free software: you can redistribute it and/or modify  
# it under the terms of the GNU General Public License as published by  
# the Free Software Foundation, version 3.
#
# This program is distributed in the hope that it will be useful, but 
# WITHOUT ANY WARRANTY; without even the implied warranty of 
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU 
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License 
# along with this program. If not, see <http://www.gnu.org/licenses/>.
#

echo 'Questo script nasce a supporto della Community Italiana di Deepin, ma può essere utilizzato per qualsiasi distro Debian Based.'
echo ''
PS3='Seleziona il numero corrispondende al comando che desideri avviare: '
options=("Aggiungi i Repo Debian e software consigliati" "Termina")
select opt in "${options[@]}"
do
	case $opt in
		"Aggiungi i Repo Debian e software consigliati")
			echo ''
			echo -e "\e[1;31mOra modificherò il tuo Source.List forzando Deepin ad utilizzare il Mirror Italiano GARR, ovviamente una copia del file Source.list verrà depositata nella medesima cartella in cui è presente questo script\e[0m"
			echo ''
			sudo apt update && sudo apt install -y curl wget apt-transport-https dirmngr 
			cd $HOME &
			sudo cp /etc/apt/sources.list /etc/apt/source.list.d/sources.list
			sudo bash -c 'cat << EOF > /etc/apt/sources.list.d/sources.list
# Generated by deepin-installer
deb http://deb.debian.org/debian/ stable main contrib non-free
deb-src http://deb.debian.org/debian/ stable main contrib non-free
deb http://deb.debian.org/debian/ stable-updates main contrib non-free
deb-src http://deb.debian.org/debian/ stable-updates main contrib non-free
deb http://deb.debian.org/debian-security stable/updates main
deb-src http://deb.debian.org/debian-security stable/updates main
deb http://ftp.debian.org/debian stretch-backports main
deb-src http://ftp.debian.org/debian stretch-backports main
##########################################################################################
#------------------------------------------------------------------------------#
#                      UNOFFICIAL  REPOS                       
#------------------------------------------------------------------------------#

###### 3rd Party Binary Repos
###Debian Multimedia
deb [arch=amd64,i386] https://www.deb-multimedia.org stretch main non-free
###Dropbox
deb http://linux.dropbox.com/debian jessie main
###Google Chrome Browser
deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main
###Icon Repo
deb http://ppa.launchpad.net/noobslab/icons/ubuntu artful main
deb-src http://ppa.launchpad.net/noobslab/icons/ubuntu artful main
###MEGA Sync Client
deb http://mega.nz/linux/MEGAsync/Debian_9.0/ ./
###Nextcloud Client
deb [arch=amd64,i386] http://download.opensuse.org/repositories/home:/ivaradi/Debian_9.0/ /
###Opera
deb [arch=amd64,i386] https://deb.opera.com/opera-stable/ stable non-free
###ownCloud Client
deb http://download.opensuse.org/repositories/isv:/ownCloud:/desktop/Debian_9.0/ /
###Skype
deb [arch=amd64] https://repo.skype.com/deb stable main
###Spotify
deb http://repository.spotify.com stable non-free
###Steam
deb [arch=i386,amd64] http://repo.steampowered.com/steam/ precise steam
###Sublime Text
deb https://download.sublimetext.com/ apt/stable/
###Teamviewer
deb http://linux.teamviewer.com/deb stable main
###TOR
deb [arch=i386,amd64,armel,armhf] http://deb.torproject.org/torproject.org stable main
deb-src [arch=i386,amd64,armel,armhf] http://deb.torproject.org/torproject.org stable main
###video-dl
deb http://repo.daniil.it lenny main
###Virtualbox
deb [arch=i386,amd64] http://download.virtualbox.org/virtualbox/debian stretch contrib
###Visual Studio Code
deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main
###Vivaldi Browser
deb [arch=i386,amd64] http://repo.vivaldi.com/stable/deb/ stable main
###Wine
deb [arch=i386] https://dl.winehq.org/wine-builds/debian/ stretch main
EOF'
			sudo apt update && sudo apt full-upgrade -y
			sudo wget http://www.deb-multimedia.org/pool/main/d/deb-multimedia-keyring/deb-multimedia-keyring_2016.8.1_all.deb && dpkg -i deb-multimedia-keyring_2016.8.1_all.deb
			sudo apt-key adv --keyserver pgp.mit.edu
			--recv-keys 1C61A2656FB57B7E4DE0F4C1FC918B335044912E
			sudo sudo wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | apt-key add -
			sudo sudo apt-key adv --keyserver ha.pool.sks-keyservers.net --recv-keys D530E028F59EAE4D
			sudo sudo apt-key adv --keyserver ha.pool.sks-keyservers.net --recv-keys 4B4E7A9523ACD201
			sudo wget -q -O - http://download.opensuse.org/repositories/home:/ivaradi/Debian_9.0/Release.key | apt-key add -
			sudo wget -O - http://deb.opera.com/archive.key | apt-key add -
			sudo wget http://download.opensuse.org/repositories/isv:ownCloud:desktop/Debian_8.0/Release.key && apt-key add - < Release.key && rm Release.key
			sudo apt-key adv --keyserver ha.pool.sks-keyservers.net --recv-keys 1F3045A5DF7587C3
			sudo apt-key adv --keyserver ha.pool.sks-keyservers.net --recv-keys A87FF9DF48BF1C90
			sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys F24AEA9FB05498B7
			sudo wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | apt-key add -
			sudo wget -O - https://download.teamviewer.com/download/linux/signature/TeamViewer2017.asc | apt-key add -
			sudo apt-key adv --keyserver ha.pool.sks-keyservers.net --recv-keys 74A941BA219EC810
			sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 72B97FD1D9672C93
			sudo wget -q https://www.virtualbox.org/download/oracle_vbox_2016.asc -O- | sudo apt-key add -
			sudo wget -q https://www.virtualbox.org/download/oracle_vbox.asc -O- | sudo apt-key add -
			sudo curl https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor > microsoft.gpg && mv microsoft.gpg /etc/apt/trusted.gpg.d/microsoft.gpg
			sudo apt-key adv --keyserver ha.pool.sks-keyservers.net --recv-keys 2CC26F777B8B44A1
			sudo apt-key adv --keyserver ha.pool.sks-keyservers.net --recv-keys 818A435C5FCBF54A
		echo ''
		echo 'Bene, operatività conclusa'
		echo -e "\e[1;31mTi ricordo le opzioni: 1.Aggiungi i Repo Debian e software consigliati; 2.Termina\e[0m"
		;;
		"Termina")
			echo 'Beh, spero che questo script sia stato apprezzato...Alla prossima!'
			break
		;;
		*) echo invalid option;;
	esac
done
